# Memento

Memento converts Slack thread captures into structured Jira ticket data. Given a raw Slack thread, it extracts the reporter, generates a concise title, and produces a detailed description formatted with Jira text syntax.

## How It Works

1. A Slack thread capture (plain text) is submitted to the API
2. The agent analyzes the thread to identify the reporter, core issue, and proposed solution
3. It returns a structured JSON object with three fields ready for Jira ticket creation

## Output Fields

| Field         | Type   | Description                                                                                                  |
| ------------- | ------ | ------------------------------------------------------------------------------------------------------------ |
| `reporter`    | string | MongoDB email address of the person who reported/captured the issue (e.g., `firstname.lastname@mongodb.com`) |
| `title`       | string | Concise, searchable summary of the core issue (one sentence)                                                 |
| `description` | string | Detailed description using Jira text formatting with issue summary, context, proposed solution, and footer   |

## Description Format

The generated description uses **Jira text formatting** (not markdown) and follows a consistent structure:

1. **Issue Summary** - Clear statement of the problem
2. **Context** - Relevant technical details from the conversation (APIs, code, documentation)
3. **Proposed Solution** - Recommended next steps or actions
4. **Footer** - Horizontal rule, original Slack thread link, and AI generation notice

### Jira Formatting Reference

| Element        | Syntax                                   |
| -------------- | ---------------------------------------- |
| Headers        | `h1. Header`, `h2. Header`, `h3. Header` |
| Bold           | `*bold text*`                            |
| Italic         | `_italic text_`                          |
| Monospace/code | `{{code or API names}}`                  |
| Code blocks    | `{code}code here{code}`                  |
| Bullet lists   | `* item`                                 |
| Numbered lists | `# item`                                 |
| Links          | `[Link text\|URL]`                       |
| Quotes         | `{quote}quoted text{quote}`              |

## API Reference

### Summarize a Slack Thread

**`POST /completions/memento/summarize-thread`**

Analyzes a Slack thread capture and returns structured ticket data.

**Request Body:**

| Field                | Type   | Required | Description                        |
| -------------------- | ------ | -------- | ---------------------------------- |
| `slackThreadCapture` | string | Yes      | The full Slack thread capture text |

**Example Request:**

```json
{
  "slackThreadCapture": "Slack thread from #ask-devprod-evergreen\nhttps://mongodb.slack.com/archives/...\n\n[~john.doe@mongodb.com] 10:30 AM\nI noticed the github_pr_number expansion returns unexpected values for merge queue items...\n\n[~jane.smith@mongodb.com] 10:45 AM\nThat looks like a bug in the expansion logic..."
}
```

**Example Response:**

```json
{
  "reporter": "john.doe@mongodb.com",
  "title": "Discrepancy in github_pr_number expansion for merge queue items",
  "description": "h2. Issue Summary\nThe {{github_pr_number}} expansion returns unexpected values...\n\nh2. Context\n...\n\nh2. Proposed Solution\n...\n\n----\n[Original Slack thread|https://mongodb.slack.com/archives/...]\n_This ticket was generated by AI from a Slack thread._"
}
```

**Error Responses:**

| Status | Description                                                  |
| ------ | ------------------------------------------------------------ |
| 400    | Invalid request body (missing or empty `slackThreadCapture`) |
| 500    | Agent not found or generation failed                         |

## Technical Details

| Property        | Value                        |
| --------------- | ---------------------------- |
| **Agent ID**    | `slackThreadSummarizerAgent` |
| **Model**       | GPT-4.1                      |
| **Temperature** | 0.3                          |
| **Tools**       | None (pure analysis)         |

The agent performs pure text analysis without external tool calls. It relies on the structure and content of the Slack thread capture to extract all necessary information.

## Getting Help

If you have questions or encounter issues, reach out in the [#ask-devprod-evergreen](https://mongodb.slack.com/archives/C01PS2CKECQ) Slack channel.
