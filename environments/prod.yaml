# Production-specific configuration (merged with common.yaml)
# Only contains overrides and production-specific values

ingress:
  enabled: true
  hosts:
    - sage.devprod-evergreen.prod.corp.mongodb.com

service:
  targetPort: 8080

mesh:
  enabled: true

services:
  - name: http
    ingress: true
    port: 80
    probes: true
    protocol: TCP
    targetPort: 8080
    type: ClusterIP

resources:
  requests:
    cpu: 1
    memory: 4Gi
  limits:
    cpu: 2
    memory: 8Gi

# Environment-specific variables
env:
  BRAINTRUST_PARENT: project_name:sage-prod
  BRAINTRUST_PROJECT_NAME: sage-prod
  NODE_ENV: production
  PORT: 8080
  SENTRY_ENVIRONMENT: production
  SENTRY_CAPTURE_CONSOLE: true

defaultAlerts:
  enabled: true
  slack: "mySlackReceiver"

alertRoutingConfig:
  enabled: true
  slackReceivers:
    mySlackReceiver:
      apiURL:
        name: "slack-alert-secret"
        key: "apiUrl"

autoscaling:
  minReplicas: 2
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80
